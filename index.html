<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Digital Well-being Research Survey</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  :root {
    --ink: #0e0e14; --ink-soft: #3a3a4a; --ink-ghost: #8888a0;
    --paper: #f5f3ee; --paper-warm: #ede9e0;
    --accent: #2a2fff; --accent-light: #e8e8ff; --accent-green: #00c97a;
    --red: #ff3b5c; --card: #ffffff; --border: #e0ddd6;
  }
  html { scroll-behavior: smooth; }
  body { font-family: 'DM Sans', sans-serif; background: var(--paper); color: var(--ink); min-height: 100vh; overflow-x: hidden; }

  #progress-bar { position: fixed; top: 0; left: 0; right: 0; height: 3px; background: var(--border); z-index: 1000; }
  #progress-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--accent), var(--accent-green)); transition: width 0.5s cubic-bezier(0.4,0,0.2,1); }

  #top-nav { position: fixed; top: 3px; left: 0; right: 0; height: 52px; background: rgba(245,243,238,0.92); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; padding: 0 32px; z-index: 999; }
  .nav-brand { font-family: 'DM Serif Display', serif; font-size: 15px; color: var(--ink); }
  .nav-counter { font-size: 12px; font-weight: 500; color: var(--ink-ghost); letter-spacing: 0.06em; text-transform: uppercase; }
  .nav-dots { display: flex; gap: 5px; }
  .nav-dot { width: 7px; height: 7px; border-radius: 50%; background: var(--border); transition: all 0.3s; cursor: pointer; }
  .nav-dot.active { background: var(--accent); transform: scale(1.3); }
  .nav-dot.done { background: var(--accent-green); }

  main { padding: 88px 24px 120px; max-width: 720px; margin: 0 auto; }

  .section { display: none; animation: sectionIn 0.5s cubic-bezier(0.4,0,0.2,1) forwards; }
  .section.active { display: block; }
  @keyframes sectionIn { from { opacity: 0; transform: translateY(28px); } to { opacity: 1; transform: translateY(0); } }

  .section-header { margin-bottom: 36px; padding-bottom: 24px; border-bottom: 1px solid var(--border); }
  .section-tag { display: inline-flex; align-items: center; gap: 8px; font-size: 11px; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; color: var(--accent); margin-bottom: 12px; }
  .section-tag span { width: 20px; height: 20px; border-radius: 50%; background: var(--accent); color: white; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: 700; }
  .section-title { font-family: 'DM Serif Display', serif; font-size: clamp(26px,5vw,38px); line-height: 1.15; letter-spacing: -0.03em; color: var(--ink); margin-bottom: 10px; }
  .section-subtitle { font-size: 14px; line-height: 1.6; color: var(--ink-soft); max-width: 560px; }

  .q-card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 28px 32px; margin-bottom: 16px; transition: border-color 0.2s, box-shadow 0.2s; }
  .q-card:focus-within { border-color: var(--accent); box-shadow: 0 0 0 3px var(--accent-light); }
  .q-card.answered { border-color: #c8f5df; }

  .q-label { display: flex; align-items: flex-start; gap: 12px; margin-bottom: 20px; }
  .q-num { flex-shrink: 0; width: 26px; height: 26px; border-radius: 8px; background: var(--accent-light); color: var(--accent); font-size: 11px; font-weight: 700; display: flex; align-items: center; justify-content: center; margin-top: 2px; }
  .q-text { font-size: 15px; font-weight: 600; line-height: 1.45; color: var(--ink); flex: 1; }
  .q-note { font-size: 12px; color: var(--ink-ghost); margin-top: 5px; line-height: 1.5; font-style: italic; }
  .q-type-tag { display: inline-block; font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; color: var(--ink-ghost); background: var(--paper); border: 1px solid var(--border); border-radius: 4px; padding: 2px 7px; margin-top: 6px; }

  .options { display: flex; flex-direction: column; gap: 8px; }
  .opt { display: flex; align-items: flex-start; gap: 12px; padding: 12px 16px; border: 1.5px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.18s; background: var(--paper); user-select: none; }
  .opt:hover { border-color: var(--accent); background: var(--accent-light); }
  .opt.selected { border-color: var(--accent); background: var(--accent-light); }
  .opt.selected .opt-mark { background: var(--accent); border-color: var(--accent); }
  .opt.selected .opt-mark::after { opacity: 1; }
  .opt-mark { flex-shrink: 0; width: 18px; height: 18px; border-radius: 50%; border: 2px solid var(--border); background: white; margin-top: 1px; transition: all 0.18s; position: relative; display: flex; align-items: center; justify-content: center; }
  .opt-mark::after { content: ''; width: 8px; height: 8px; border-radius: 50%; background: white; opacity: 0; transition: opacity 0.18s; }
  .opt.multi .opt-mark { border-radius: 5px; }
  .opt.multi.selected .opt-mark::after { content: '‚úì'; font-size: 9px; font-weight: 700; width: auto; height: auto; border-radius: 0; background: transparent; color: white; opacity: 1; }
  .opt-label { font-size: 14px; line-height: 1.45; color: var(--ink-soft); flex: 1; }

  .scale-wrap { display: flex; flex-direction: column; gap: 14px; }
  .scale-labels { display: flex; justify-content: space-between; }
  .scale-label { font-size: 11px; color: var(--ink-ghost); max-width: 130px; line-height: 1.3; }
  .scale-label:last-child { text-align: right; }
  .scale-buttons { display: flex; gap: 6px; }
  .scale-btn { flex: 1; aspect-ratio: 1; max-width: 64px; border: 1.5px solid var(--border); border-radius: 10px; background: var(--paper); font-size: 14px; font-weight: 600; color: var(--ink-soft); cursor: pointer; transition: all 0.18s; display: flex; align-items: center; justify-content: center; }
  .scale-btn:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-light); }
  .scale-btn.selected { background: var(--accent); border-color: var(--accent); color: white; transform: scale(1.08); box-shadow: 0 4px 12px rgba(42,47,255,0.25); }

  .q-textarea { width: 100%; min-height: 100px; border: 1.5px solid var(--border); border-radius: 10px; background: var(--paper); padding: 14px 16px; font-family: 'DM Sans', sans-serif; font-size: 14px; line-height: 1.6; color: var(--ink); resize: vertical; transition: border-color 0.2s; outline: none; }
  .q-textarea:focus { border-color: var(--accent); background: white; }
  .q-input { width: 100%; border: 1.5px solid var(--border); border-radius: 10px; background: var(--paper); padding: 12px 16px; font-family: 'DM Sans', sans-serif; font-size: 14px; color: var(--ink); transition: border-color 0.2s; outline: none; }
  .q-input:focus { border-color: var(--accent); background: white; }

  .required { color: var(--red); margin-left: 3px; }

  .nav-buttons { position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 720px; padding: 16px 32px 24px; background: linear-gradient(to top, var(--paper) 70%, transparent); display: flex; align-items: center; justify-content: space-between; }
  .btn { display: inline-flex; align-items: center; gap: 8px; padding: 12px 24px; border-radius: 12px; font-family: 'DM Sans', sans-serif; font-size: 14px; font-weight: 600; cursor: pointer; border: none; transition: all 0.2s; }
  .btn-back { background: transparent; color: var(--ink-ghost); border: 1.5px solid var(--border); }
  .btn-back:hover { border-color: var(--ink-soft); color: var(--ink); }
  .btn-next { background: var(--accent); color: white; box-shadow: 0 4px 16px rgba(42,47,255,0.3); }
  .btn-next:hover { background: #1a1ddd; transform: translateY(-1px); }
  .btn-submit { background: var(--accent-green); color: white; box-shadow: 0 4px 16px rgba(0,201,122,0.35); }
  .btn-submit:hover { background: #00a863; transform: translateY(-1px); }
  .btn-submit:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }

  /* Cover */
  #cover { min-height: calc(100vh - 55px); display: flex; flex-direction: column; justify-content: center; padding: 60px 24px 140px; max-width: 720px; margin: 0 auto; }
  .cover-eyebrow { font-size: 11px; font-weight: 600; letter-spacing: 0.12em; text-transform: uppercase; color: var(--accent); margin-bottom: 20px; display: flex; align-items: center; gap: 8px; }
  .cover-eyebrow::before { content: ''; width: 24px; height: 2px; background: var(--accent); }
  .cover-title { font-family: 'DM Serif Display', serif; font-size: clamp(36px,7vw,62px); line-height: 1.05; letter-spacing: -0.04em; color: var(--ink); margin-bottom: 20px; }
  .cover-title em { color: var(--accent); font-style: italic; }
  .cover-desc { font-size: 16px; line-height: 1.7; color: var(--ink-soft); max-width: 500px; margin-bottom: 40px; }
  .cover-meta { display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 48px; }
  .meta-pill { display: flex; align-items: center; gap: 8px; font-size: 13px; font-weight: 500; color: var(--ink-soft); }
  .btn-start { display: inline-flex; align-items: center; gap: 10px; background: var(--ink); color: white; padding: 16px 32px; border-radius: 14px; font-family: 'DM Sans', sans-serif; font-size: 15px; font-weight: 600; border: none; cursor: pointer; transition: all 0.2s; width: fit-content; }
  .btn-start:hover { background: var(--accent); transform: translateY(-2px); box-shadow: 0 8px 24px rgba(42,47,255,0.3); }
  .cover-note { margin-top: 24px; font-size: 12px; color: var(--ink-ghost); line-height: 1.6; max-width: 420px; }

  /* Thank you */
  #thankyou { display: none; min-height: calc(100vh - 55px); flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 60px 24px; max-width: 720px; margin: 0 auto; }
  .ty-icon { width: 80px; height: 80px; border-radius: 50%; background: var(--accent-green); color: white; font-size: 36px; display: flex; align-items: center; justify-content: center; margin: 0 auto 28px; animation: popIn 0.5s cubic-bezier(0.34,1.56,0.64,1) forwards; }
  @keyframes popIn { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
  .ty-title { font-family: 'DM Serif Display', serif; font-size: 42px; letter-spacing: -0.03em; color: var(--ink); margin-bottom: 14px; }
  .ty-text { font-size: 16px; line-height: 1.7; color: var(--ink-soft); max-width: 440px; margin: 0 auto 32px; }
  .ty-bar { width: 200px; height: 4px; border-radius: 2px; background: var(--border); overflow: hidden; margin: 0 auto; }
  .ty-fill { height: 100%; width: 0%; background: linear-gradient(90deg,var(--accent),var(--accent-green)); animation: fillBar 2s 0.3s forwards; }
  @keyframes fillBar { to { width: 100%; } }

  /* Submitting overlay */
  #submitting-overlay { display: none; position: fixed; inset: 0; background: rgba(245,243,238,0.92); backdrop-filter: blur(8px); z-index: 2000; flex-direction: column; align-items: center; justify-content: center; gap: 16px; }
  #submitting-overlay.visible { display: flex; }
  .spinner { width: 40px; height: 40px; border: 3px solid var(--border); border-top-color: var(--accent); border-radius: 50%; animation: spin 0.8s linear infinite; }
  @keyframes spin { to { transform: rotate(360deg); } }
  .submitting-text { font-size: 14px; font-weight: 500; color: var(--ink-soft); }

  /* Setup banner */
  #setup-banner { background: #fff8e1; border: 1.5px solid #ffd54f; border-radius: 12px; padding: 16px 20px; margin-bottom: 24px; font-size: 13px; line-height: 1.6; color: #5d4037; }
  #setup-banner strong { color: #e65100; }
  #setup-banner code { background: #fff3e0; padding: 2px 6px; border-radius: 4px; font-family: monospace; font-size: 12px; }

  .consent-box { background: var(--paper); border: 1.5px solid var(--border); border-radius: 12px; padding: 20px 24px; margin-top: 16px; }
  .consent-box p { font-size: 13px; line-height: 1.7; color: var(--ink-soft); margin-bottom: 8px; }
  .consent-item { display: flex; gap: 10px; align-items: flex-start; font-size: 12px; color: var(--ink-soft); margin-bottom: 6px; }
  .consent-item::before { content: '‚úì'; color: var(--accent-green); font-weight: 700; flex-shrink: 0; }

  @media (max-width: 520px) {
    main, #cover { padding-left: 16px; padding-right: 16px; }
    .q-card { padding: 20px 18px; }
    .nav-buttons { padding: 12px 16px 20px; }
  }
</style>
</head>
<body>

<div id="progress-bar"><div id="progress-fill"></div></div>

<div id="top-nav">
  <div class="nav-brand">Digital Well-being Survey</div>
  <div style="display:flex;align-items:center;gap:16px">
    <div class="nav-dots" id="nav-dots"></div>
    <div class="nav-counter" id="nav-counter">Section 1 of 6</div>
  </div>
</div>

<!-- Submitting overlay -->
<div id="submitting-overlay">
  <div class="spinner"></div>
  <div class="submitting-text">Saving your responses to Google Drive...</div>
</div>

<!-- COVER -->
<div id="cover">
  <div class="cover-eyebrow">Growth Team ¬∑ Product Research</div>
  <h1 class="cover-title">How well do you<br>know your own <em>screen habits?</em></h1>
  <p class="cover-desc">This isn't about judgment or restriction. We're trying to understand the <em>why</em> behind how people use their phones ‚Äî the emotional triggers, hidden patterns, and moments you can't quite explain.</p>
  <div class="cover-meta">
    <div class="meta-pill">‚è± 12‚Äì15 minutes</div>
    <div class="meta-pill">üîí Fully anonymous</div>
    <div class="meta-pill">üìã 31 questions, 6 sections</div>
    <div class="meta-pill">üéØ Ages 18‚Äì40, Android & iOS</div>
  </div>
  <button class="btn-start" onclick="startSurvey()">Begin Survey ‚Üí</button>
  <p class="cover-note">No right or wrong answers. Your candid responses will directly shape the design of a future well-being feature on Android/iOS.</p>
</div>

<!-- MAIN SURVEY -->
<main id="survey-main" style="display:none">

  <!-- SECTION 1 -->
  <div class="section active" id="sec-1">
    <div class="section-header">
      <div class="section-tag"><span>1</span> Screener & Demographics</div>
      <h2 class="section-title">Let's start with you</h2>
      <p class="section-subtitle">Quick questions to understand who you are. All optional except where marked.</p>
    </div>

    <div class="q-card" id="q1-card">
      <div class="q-label"><div class="q-num">1</div><div>
        <div class="q-text">How old are you? <span class="required">*</span></div>
        <div class="q-type-tag">Single Select</div>
      </div></div>
      <div class="options" data-q="q1" data-type="single">
        <div class="opt" onclick="selectOpt(this,'q1')"><div class="opt-mark"></div><div class="opt-label">18‚Äì24</div></div>
        <div class="opt" onclick="selectOpt(this,'q1')"><div class="opt-mark"></div><div class="opt-label">25‚Äì30</div></div>
        <div class="opt" onclick="selectOpt(this,'q1')"><div class="opt-mark"></div><div class="opt-label">31‚Äì35</div></div>
        <div class="opt" onclick="selectOpt(this,'q1')"><div class="opt-mark"></div><div class="opt-label">36‚Äì40</div></div>
        <div class="opt" onclick="selectOpt(this,'q1')"><div class="opt-mark"></div><div class="opt-label">41‚Äì50</div></div>
        <div class="opt" onclick="selectOpt(this,'q1')"><div class="opt-mark"></div><div class="opt-label">50+</div></div>
      </div>
    </div>

    <div class="q-card" id="q2-card">
      <div class="q-label"><div class="q-num">2</div><div>
        <div class="q-text">Primary smartphone platform? <span class="required">*</span></div>
        <div class="q-type-tag">Single Select</div>
      </div></div>
      <div class="options" data-q="q2" data-type="single">
        <div class="opt" onclick="selectOpt(this,'q2')"><div class="opt-mark"></div><div class="opt-label">Android</div></div>
        <div class="opt" onclick="selectOpt(this,'q2')"><div class="opt-mark"></div><div class="opt-label">iOS (iPhone)</div></div>
        <div class="opt" onclick="selectOpt(this,'q2')"><div class="opt-mark"></div><div class="opt-label">Both equally</div></div>
      </div>
    </div>

    <div class="q-card" id="q3-card">
      <div class="q-label"><div class="q-num">3</div><div>
        <div class="q-text">Daily screen time on a typical weekday?</div>
        <div class="q-type-tag">Single Select</div>
      </div></div>
      <div class="options" data-q="q3" data-type="single">
        <div class="opt" onclick="selectOpt(this,'q3')"><div class="opt-mark"></div><div class="opt-label">Less than 1 hour</div></div>
        <div class="opt" onclick="selectOpt(this,'q3')"><div class="opt-mark"></div><div class="opt-label">1‚Äì2 hours</div></div>
        <div class="opt" onclick="selectOpt(this,'q3')"><div class="opt-mark"></div><div class="opt-label">2‚Äì4 hours</div></div>
        <div class="opt" onclick="selectOpt(this,'q3')"><div class="opt-mark"></div><div class="opt-label">4‚Äì6 hours</div></div>
        <div class="opt" onclick="selectOpt(this,'q3')"><div class="opt-mark"></div><div class="opt-label">6‚Äì8 hours</div></div>
        <div class="opt" onclick="selectOpt(this,'q3')"><div class="opt-mark"></div><div class="opt-label">More than 8 hours</div></div>
      </div>
    </div>

    <div class="q-card" id="q4-card">
      <div class="q-label"><div class="q-num">4</div><div>
        <div class="q-text">Have you used iOS Screen Time or Android Digital Wellbeing?</div>
        <div class="q-type-tag">Single Select</div>
      </div></div>
      <div class="options" data-q="q4" data-type="single">
        <div class="opt" onclick="selectOpt(this,'q4')"><div class="opt-mark"></div><div class="opt-label">Yes, I use it regularly</div></div>
        <div class="opt" onclick="selectOpt(this,'q4')"><div class="opt-mark"></div><div class="opt-label">Yes, I tried it but stopped</div></div>
        <div class="opt" onclick="selectOpt(this,'q4')"><div class="opt-mark"></div><div class="opt-label">Seen it but never used it</div></div>
        <div class="opt" onclick="selectOpt(this,'q4')"><div class="opt-mark"></div><div class="opt-label">Didn't know this existed</div></div>
      </div>
    </div>

    <div class="q-card" id="q5-card">
      <div class="q-label"><div class="q-num">5</div><div>
        <div class="q-text">Your current relationship with your smartphone?</div>
        <div class="q-type-tag">Single Select</div>
      </div></div>
      <div class="options" data-q="q5" data-type="single">
        <div class="opt" onclick="selectOpt(this,'q5')"><div class="opt-mark"></div><div class="opt-label">I feel in control ‚Äî I use it when I want to</div></div>
        <div class="opt" onclick="selectOpt(this,'q5')"><div class="opt-mark"></div><div class="opt-label">I use it more than I'd like, but it doesn't bother me much</div></div>
        <div class="opt" onclick="selectOpt(this,'q5')"><div class="opt-mark"></div><div class="opt-label">I use it more than I'd like and it sometimes bothers me</div></div>
        <div class="opt" onclick="selectOpt(this,'q5')"><div class="opt-mark"></div><div class="opt-label">It's genuinely affecting my life negatively</div></div>
        <div class="opt" onclick="selectOpt(this,'q5')"><div class="opt-mark"></div><div class="opt-label">I'm not sure ‚Äî I don't think about it much</div></div>
      </div>
    </div>

    <div class="q-card" id="q6-card">
      <div class="q-label"><div class="q-num">6</div><div>
        <div class="q-text">Current life stage? (Select all that apply)</div>
        <div class="q-type-tag">Multi-Select</div>
      </div></div>
      <div class="options" data-q="q6" data-type="multi">
        <div class="opt multi" onclick="selectOpt(this,'q6')"><div class="opt-mark"></div><div class="opt-label">Student</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q6')"><div class="opt-mark"></div><div class="opt-label">Working professional</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q6')"><div class="opt-mark"></div><div class="opt-label">Parent / caregiver</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q6')"><div class="opt-mark"></div><div class="opt-label">Freelancer / entrepreneur</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q6')"><div class="opt-mark"></div><div class="opt-label">Prefer not to say</div></div>
      </div>
    </div>
  </div>

  <!-- SECTION 2 -->
  <div class="section" id="sec-2">
    <div class="section-header">
      <div class="section-tag"><span>2</span> Self-Awareness</div>
      <h2 class="section-title">How well do you know your own habits?</h2>
      <p class="section-subtitle">Before seeing any data ‚Äî what does your gut tell you?</p>
    </div>

    <div class="q-card" id="q7-card">
      <div class="q-label"><div class="q-num">7</div><div>
        <div class="q-text">How many times do you think you picked up your phone yesterday?</div>
        <div class="q-note">Don't check your stats! Write your honest gut estimate.</div>
        <div class="q-type-tag">Short Text</div>
      </div></div>
      <input class="q-input" type="text" id="q7" placeholder="e.g. 40 times" oninput="markAnswered('q7-card')">
    </div>

    <div class="q-card" id="q8-card">
      <div class="q-label"><div class="q-num">8</div><div>
        <div class="q-text">First app you open in the morning?</div>
        <div class="q-note">Just name the app ‚Äî no judgement.</div>
        <div class="q-type-tag">Short Text</div>
      </div></div>
      <input class="q-input" type="text" id="q8" placeholder="e.g. Instagram, WhatsApp..." oninput="markAnswered('q8-card')">
    </div>

    <div class="q-card" id="q9-card">
      <div class="q-label"><div class="q-num">9</div><div>
        <div class="q-text">Last time you were in bed, lights off, still scrolling ‚Äî what were you doing?</div>
        <div class="q-type-tag">Single Select</div>
      </div></div>
      <div class="options" data-q="q9" data-type="single">
        <div class="opt" onclick="selectOpt(this,'q9')"><div class="opt-mark"></div><div class="opt-label">Short video content (Reels, TikTok, YouTube Shorts)</div></div>
        <div class="opt" onclick="selectOpt(this,'q9')"><div class="opt-mark"></div><div class="opt-label">Long-form reading (articles, Reddit, Twitter/X)</div></div>
        <div class="opt" onclick="selectOpt(this,'q9')"><div class="opt-mark"></div><div class="opt-label">Messaging / chatting</div></div>
        <div class="opt" onclick="selectOpt(this,'q9')"><div class="opt-mark"></div><div class="opt-label">Mindless browsing ‚Äî no real goal</div></div>
        <div class="opt" onclick="selectOpt(this,'q9')"><div class="opt-mark"></div><div class="opt-label">I don't do this</div></div>
        <div class="opt" onclick="selectOpt(this,'q9')"><div class="opt-mark"></div><div class="opt-label">Other</div></div>
      </div>
    </div>

    <div class="q-card" id="q10-card">
      <div class="q-label"><div class="q-num">10</div><div>
        <div class="q-text">How accurately can you predict your own usage patterns day to day?</div>
        <div class="q-type-tag">Likert Scale 1‚Äì7</div>
      </div></div>
      <div class="scale-wrap">
        <div class="scale-labels"><div class="scale-label">Surprises me every time</div><div class="scale-label">I know my habits well</div></div>
        <div class="scale-buttons" data-q="q10">
          <div class="scale-btn" onclick="selectScale(this,'q10')">1</div><div class="scale-btn" onclick="selectScale(this,'q10')">2</div><div class="scale-btn" onclick="selectScale(this,'q10')">3</div><div class="scale-btn" onclick="selectScale(this,'q10')">4</div><div class="scale-btn" onclick="selectScale(this,'q10')">5</div><div class="scale-btn" onclick="selectScale(this,'q10')">6</div><div class="scale-btn" onclick="selectScale(this,'q10')">7</div>
        </div>
      </div>
    </div>

    <div class="q-card" id="q11-card">
      <div class="q-label"><div class="q-num">11</div><div>
        <div class="q-text">When you look at your screen time data, how do you typically feel? (Select all)</div>
        <div class="q-type-tag">Multi-Select</div>
      </div></div>
      <div class="options" data-q="q11" data-type="multi">
        <div class="opt multi" onclick="selectOpt(this,'q11')"><div class="opt-mark"></div><div class="opt-label">Shocked / surprised</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q11')"><div class="opt-mark"></div><div class="opt-label">Guilty or disappointed in myself</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q11')"><div class="opt-mark"></div><div class="opt-label">Defensive ("these numbers don't count")</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q11')"><div class="opt-mark"></div><div class="opt-label">Curious ‚Äî I want to understand why</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q11')"><div class="opt-mark"></div><div class="opt-label">Neutral ‚Äî just data</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q11')"><div class="opt-mark"></div><div class="opt-label">Confused ‚Äî doesn't match how my week felt</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q11')"><div class="opt-mark"></div><div class="opt-label">I rarely look at that data</div></div>
      </div>
    </div>

    <div class="q-card" id="q12-card">
      <div class="q-label"><div class="q-num">12</div><div>
        <div class="q-text">Describe the moment you feel most aware you've been on your phone "too long." What snaps you out of it?</div>
        <div class="q-type-tag">Open Text</div>
      </div></div>
      <textarea class="q-textarea" id="q12" placeholder="Physical cues? Time check? A feeling inside?" oninput="markAnswered('q12-card')"></textarea>
    </div>
  </div>

  <!-- SECTION 3 -->
  <div class="section" id="sec-3">
    <div class="section-header">
      <div class="section-tag"><span>3</span> Emotional Triggers</div>
      <h2 class="section-title">The <em>why</em> behind the scroll</h2>
      <p class="section-subtitle">What emotional states, places, or situations drive usage you later question?</p>
    </div>

    <div class="q-card" id="q13-card">
      <div class="q-label"><div class="q-num">13</div><div>
        <div class="q-text">Think of a recent time you reached for your phone and weren't sure why. What were you doing just before?</div>
        <div class="q-note">Where were you? What time? How were you feeling?</div>
        <div class="q-type-tag">Open Text</div>
      </div></div>
      <textarea class="q-textarea" id="q13" placeholder="Paint the picture..." oninput="markAnswered('q13-card')"></textarea>
    </div>

    <div class="q-card" id="q14-card">
      <div class="q-label"><div class="q-num">14</div><div>
        <div class="q-text">Which emotions make you pick up your phone most automatically? (Pick top 3)</div>
        <div class="q-type-tag">Multi-Select (max 3)</div>
      </div></div>
      <div class="options" data-q="q14" data-type="multi" data-max="3">
        <div class="opt multi" onclick="selectOpt(this,'q14')"><div class="opt-mark"></div><div class="opt-label">Boredom</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q14')"><div class="opt-mark"></div><div class="opt-label">Anxiety or worry</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q14')"><div class="opt-mark"></div><div class="opt-label">Loneliness or wanting connection</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q14')"><div class="opt-mark"></div><div class="opt-label">Procrastination</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q14')"><div class="opt-mark"></div><div class="opt-label">FOMO ‚Äî worried I've missed something</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q14')"><div class="opt-mark"></div><div class="opt-label">Sadness or low mood</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q14')"><div class="opt-mark"></div><div class="opt-label">Habit / muscle memory ‚Äî no clear feeling</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q14')"><div class="opt-mark"></div><div class="opt-label">Waiting (for food, transport, someone)</div></div>
      </div>
    </div>

    <div class="q-card" id="q15-card">
      <div class="q-label"><div class="q-num">15</div><div>
        <div class="q-text">Times of day when you feel least in control of your phone use?</div>
        <div class="q-type-tag">Multi-Select</div>
      </div></div>
      <div class="options" data-q="q15" data-type="multi">
        <div class="opt multi" onclick="selectOpt(this,'q15')"><div class="opt-mark"></div><div class="opt-label">First thing in the morning (before getting up)</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q15')"><div class="opt-mark"></div><div class="opt-label">During commute / travel</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q15')"><div class="opt-mark"></div><div class="opt-label">Midday / lunch break</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q15')"><div class="opt-mark"></div><div class="opt-label">Afternoon slump (3‚Äì5 PM)</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q15')"><div class="opt-mark"></div><div class="opt-label">Evening wind-down (6‚Äì9 PM)</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q15')"><div class="opt-mark"></div><div class="opt-label">Late night (10 PM ‚Äì 1 AM)</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q15')"><div class="opt-mark"></div><div class="opt-label">No specific pattern ‚Äî it's random</div></div>
      </div>
    </div>

    <div class="q-card" id="q16-card">
      <div class="q-label"><div class="q-num">16</div><div>
        <div class="q-text">Have you set a phone rule and broken it the same day?</div>
        <div class="q-type-tag">Single Select</div>
      </div></div>
      <div class="options" data-q="q16" data-type="single">
        <div class="opt" onclick="selectOpt(this,'q16')"><div class="opt-mark"></div><div class="opt-label">Yes, regularly</div></div>
        <div class="opt" onclick="selectOpt(this,'q16')"><div class="opt-mark"></div><div class="opt-label">Yes, occasionally</div></div>
        <div class="opt" onclick="selectOpt(this,'q16')"><div class="opt-mark"></div><div class="opt-label">Rarely</div></div>
        <div class="opt" onclick="selectOpt(this,'q16')"><div class="opt-mark"></div><div class="opt-label">I don't set these kinds of rules</div></div>
      </div>
    </div>

    <div class="q-card" id="q17-card">
      <div class="q-label"><div class="q-num">17</div><div>
        <div class="q-text">How much is your phone use driven by habit vs emotion?</div>
        <div class="q-type-tag">Likert Scale 1‚Äì7</div>
      </div></div>
      <div class="scale-wrap">
        <div class="scale-labels"><div class="scale-label">Pure habit / routine</div><div class="scale-label">Purely emotional / reactive</div></div>
        <div class="scale-buttons" data-q="q17">
          <div class="scale-btn" onclick="selectScale(this,'q17')">1</div><div class="scale-btn" onclick="selectScale(this,'q17')">2</div><div class="scale-btn" onclick="selectScale(this,'q17')">3</div><div class="scale-btn" onclick="selectScale(this,'q17')">4</div><div class="scale-btn" onclick="selectScale(this,'q17')">5</div><div class="scale-btn" onclick="selectScale(this,'q17')">6</div><div class="scale-btn" onclick="selectScale(this,'q17')">7</div>
        </div>
      </div>
    </div>

    <div class="q-card" id="q18-card">
      <div class="q-label"><div class="q-num">18</div><div>
        <div class="q-text">Describe a situation where you consistently use your phone in a way that surprises or frustrates you afterwards.</div>
        <div class="q-note">E.g., "Every Sunday evening I end up on TikTok for 2 hours and never plan to"</div>
        <div class="q-type-tag">Open Text</div>
      </div></div>
      <textarea class="q-textarea" id="q18" placeholder="Describe the situation..." oninput="markAnswered('q18-card')"></textarea>
    </div>
  </div>

  <!-- SECTION 4 -->
  <div class="section" id="sec-4">
    <div class="section-header">
      <div class="section-tag"><span>4</span> Current Tool Experience</div>
      <h2 class="section-title">What works. What doesn't.</h2>
      <p class="section-subtitle">Auditing existing digital well-being features from your perspective.</p>
    </div>

    <div class="q-card" id="q19-card">
      <div class="q-label"><div class="q-num">19</div><div>
        <div class="q-text">Which well-being features have you used? (Select all)</div>
        <div class="q-type-tag">Multi-Select</div>
      </div></div>
      <div class="options" data-q="q19" data-type="multi">
        <div class="opt multi" onclick="selectOpt(this,'q19')"><div class="opt-mark"></div><div class="opt-label">iOS Screen Time ‚Äî usage dashboard</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q19')"><div class="opt-mark"></div><div class="opt-label">iOS Screen Time ‚Äî downtime / app limits</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q19')"><div class="opt-mark"></div><div class="opt-label">Android Digital Wellbeing ‚Äî dashboard</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q19')"><div class="opt-mark"></div><div class="opt-label">Android Focus Mode</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q19')"><div class="opt-mark"></div><div class="opt-label">Third-party app (RescueTime, Forest, etc.)</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q19')"><div class="opt-mark"></div><div class="opt-label">None of the above</div></div>
      </div>
    </div>

    <div class="q-card" id="q20-card">
      <div class="q-label"><div class="q-num">20</div><div>
        <div class="q-text">Why did you stop using well-being features? Or why do you continue?</div>
        <div class="q-note">Be honest ‚Äî we want the real reason.</div>
        <div class="q-type-tag">Open Text</div>
      </div></div>
      <textarea class="q-textarea" id="q20" placeholder="Tell us what really happened..." oninput="markAnswered('q20-card')"></textarea>
    </div>

    <div class="q-card" id="q21-card">
      <div class="q-label"><div class="q-num">21</div><div>
        <div class="q-text">"The problem with my current screen time dashboard is..."</div>
        <div class="q-type-tag">Open Text</div>
      </div></div>
      <textarea class="q-textarea" id="q21" placeholder="Complete the sentence..." style="min-height:72px" oninput="markAnswered('q21-card')"></textarea>
    </div>

    <div class="q-card" id="q22-card">
      <div class="q-label"><div class="q-num">22</div><div>
        <div class="q-text">If you could ask your phone one question about your behavior and it would answer honestly ‚Äî what would you ask?</div>
        <div class="q-note">Assume it can see everything.</div>
        <div class="q-type-tag">Open Text</div>
      </div></div>
      <textarea class="q-textarea" id="q22" placeholder="Your dream question..." oninput="markAnswered('q22-card')"></textarea>
    </div>
  </div>

  <!-- SECTION 5 -->
  <div class="section" id="sec-5">
    <div class="section-header">
      <div class="section-tag"><span>5</span> Ideal Experience</div>
      <h2 class="section-title">What would actually help?</h2>
      <p class="section-subtitle">Testing specific concepts ‚Äî your instinct matters more than a "correct" answer.</p>
    </div>

    <div class="q-card" id="q23-card">
      <div class="q-label"><div class="q-num">23</div><div>
        <div class="q-text">Imagine your phone sends you ONE message a week about your behavior. What would you want?</div>
        <div class="q-type-tag">Single Select</div>
      </div></div>
      <div class="options" data-q="q23" data-type="single">
        <div class="opt" onclick="selectOpt(this,'q23')"><div class="opt-mark"></div><div class="opt-label">Plain text summary: "You picked up your phone 87 times on Wednesday ‚Äî more than usual."</div></div>
        <div class="opt" onclick="selectOpt(this,'q23')"><div class="opt-mark"></div><div class="opt-label">Visual heat map: when and how long you were on your phone</div></div>
        <div class="opt" onclick="selectOpt(this,'q23')"><div class="opt-mark"></div><div class="opt-label">Emotional framing: "You scrolled most after 9 PM ‚Äî often when winding down alone"</div></div>
        <div class="opt" onclick="selectOpt(this,'q23')"><div class="opt-mark"></div><div class="opt-label">Single insight card: one surprising thing you might not have noticed</div></div>
        <div class="opt" onclick="selectOpt(this,'q23')"><div class="opt-mark"></div><div class="opt-label">Nothing ‚Äî I don't want messages about this</div></div>
      </div>
    </div>

    <div class="q-card" id="q24-card">
      <div class="q-label"><div class="q-num">24</div><div>
        <div class="q-text">How comfortable would you be if your phone showed insights about the emotional context of your usage?</div>
        <div class="q-note">E.g., "You tend to scroll more on anxious days"</div>
        <div class="q-type-tag">Likert Scale 1‚Äì7</div>
      </div></div>
      <div class="scale-wrap">
        <div class="scale-labels"><div class="scale-label">Deeply uncomfortable ‚Äî feels invasive</div><div class="scale-label">Very comfortable ‚Äî exactly what I'd want</div></div>
        <div class="scale-buttons" data-q="q24">
          <div class="scale-btn" onclick="selectScale(this,'q24')">1</div><div class="scale-btn" onclick="selectScale(this,'q24')">2</div><div class="scale-btn" onclick="selectScale(this,'q24')">3</div><div class="scale-btn" onclick="selectScale(this,'q24')">4</div><div class="scale-btn" onclick="selectScale(this,'q24')">5</div><div class="scale-btn" onclick="selectScale(this,'q24')">6</div><div class="scale-btn" onclick="selectScale(this,'q24')">7</div>
        </div>
      </div>
    </div>

    <div class="q-card" id="q25-card">
      <div class="q-label"><div class="q-num">25</div><div>
        <div class="q-text">What would make a behavioral insight feel trustworthy? (Select all)</div>
        <div class="q-type-tag">Multi-Select</div>
      </div></div>
      <div class="options" data-q="q25" data-type="multi">
        <div class="opt multi" onclick="selectOpt(this,'q25')"><div class="opt-mark"></div><div class="opt-label">If I could see HOW it was calculated</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q25')"><div class="opt-mark"></div><div class="opt-label">If it acknowledged uncertainty ("this seems like a pattern ‚Äî do you agree?")</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q25')"><div class="opt-mark"></div><div class="opt-label">If I could mark it as wrong or irrelevant</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q25')"><div class="opt-mark"></div><div class="opt-label">If it never left my device (on-device processing)</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q25')"><div class="opt-mark"></div><div class="opt-label">If it was framed as observation, not judgment</div></div>
        <div class="opt multi" onclick="selectOpt(this,'q25')"><div class="opt-mark"></div><div class="opt-label">Nothing would ‚Äî I'd rather not have this</div></div>
      </div>
    </div>

    <div class="q-card" id="q26-card">
      <div class="q-label"><div class="q-num">26</div><div>
        <div class="q-text">Have you ever used an app that made you feel genuinely understood? What made it feel that way?</div>
        <div class="q-note">Spotify Wrapped, Google Photos Memories, journaling apps, fitness trackers ‚Äî anything.</div>
        <div class="q-type-tag">Open Text</div>
      </div></div>
      <textarea class="q-textarea" id="q26" placeholder="Name the app and describe that feeling..." oninput="markAnswered('q26-card')"></textarea>
    </div>

    <div class="q-card" id="q27-card">
      <div class="q-label"><div class="q-num">27</div><div>
        <div class="q-text">What is the ONE thing you wish you actually understood about your own phone behavior?</div>
        <div class="q-note">The question you keep ignoring or feel slightly embarrassed to admit.</div>
        <div class="q-type-tag">Open Text</div>
      </div></div>
      <textarea class="q-textarea" id="q27" placeholder="Be honest..." oninput="markAnswered('q27-card')"></textarea>
    </div>
  </div>

  <!-- SECTION 6 -->
  <div class="section" id="sec-6">
    <div class="section-header">
      <div class="section-tag"><span>6</span> Follow-up & Consent</div>
      <h2 class="section-title">Almost done.</h2>
      <p class="section-subtitle">Last few questions ‚Äî your responses will directly shape a feature used by millions.</p>
    </div>

    <!-- SETUP BANNER ‚Äî only shows if script URL not configured -->
    <div id="setup-banner">
      ‚ö†Ô∏è <strong>Setup required:</strong> Replace <code>YOUR_APPS_SCRIPT_URL</code> in the JS below with your Google Apps Script Web App URL. <a href="#" onclick="showSetupGuide();return false;" style="color:#1565c0">How to set this up ‚Üí</a>
    </div>

    <div class="q-card" id="q28-card">
      <div class="q-label"><div class="q-num">28</div><div>
        <div class="q-text">Would you join a 45-minute follow-up interview to walk through your screen time data with a researcher?</div>
        <div class="q-note">You'd be compensated for your time.</div>
        <div class="q-type-tag">Single Select</div>
      </div></div>
      <div class="options" data-q="q28" data-type="single">
        <div class="opt" onclick="selectOpt(this,'q28');toggleEmail(true)"><div class="opt-mark"></div><div class="opt-label">Yes ‚Äî sign me up</div></div>
        <div class="opt" onclick="selectOpt(this,'q28');toggleEmail(true)"><div class="opt-mark"></div><div class="opt-label">Maybe ‚Äî tell me more first</div></div>
        <div class="opt" onclick="selectOpt(this,'q28');toggleEmail(false)"><div class="opt-mark"></div><div class="opt-label">No, but thanks</div></div>
      </div>
    </div>

    <div class="q-card" id="q29-card" style="display:none">
      <div class="q-label"><div class="q-num">29</div><div>
        <div class="q-text">Your email (only to schedule the interview ‚Äî never shared)</div>
        <div class="q-note">Completely optional. Leave blank to stay fully anonymous.</div>
        <div class="q-type-tag">Email</div>
      </div></div>
      <input class="q-input" type="email" id="q29" placeholder="your@email.com" oninput="markAnswered('q29-card')">
    </div>

    <div class="q-card" id="q30-card">
      <div class="q-label"><div class="q-num">30</div><div>
        <div class="q-text">Any final thoughts, frustrations, or ideas you'd like to share?</div>
        <div class="q-note">Free space. Say what you wanted to say but weren't asked.</div>
        <div class="q-type-tag">Open Text</div>
      </div></div>
      <textarea class="q-textarea" id="q30" placeholder="Anything on your mind..." style="min-height:120px" oninput="markAnswered('q30-card')"></textarea>
    </div>

    <div class="consent-box">
      <p><strong>Data & Consent Notice</strong></p>
      <div class="consent-item">You are 18 years of age or older</div>
      <div class="consent-item">All responses are anonymized before analysis</div>
      <div class="consent-item">Your email (if provided) is stored separately and never linked to your answers</div>
      <div class="consent-item">Data is used solely for product research ‚Äî not shared with third parties</div>
      <div class="consent-item">You may request deletion of your data at any time</div>
    </div>
  </div>

</main>

<!-- Thank You -->
<div id="thankyou" style="display:none">
  <div class="ty-icon">‚úì</div>
  <h2 class="ty-title">Thank you.</h2>
  <p class="ty-text">Your responses have been saved to Google Drive. They'll directly shape how millions of people understand their relationship with their phones.</p>
  <div class="ty-bar"><div class="ty-fill"></div></div>
  <p style="margin-top:16px;font-size:12px;color:var(--ink-ghost)">Growth Team ¬∑ Digital Well-being ¬∑ Product Research</p>
</div>

<!-- Nav Buttons -->
<div class="nav-buttons" id="nav-btns" style="display:none">
  <button class="btn btn-back" id="btn-back" onclick="prevSection()">‚Üê Back</button>
  <button class="btn btn-next" id="btn-next" onclick="nextSection()">Continue ‚Üí</button>
</div>

<!-- Setup Guide Modal -->
<div id="setup-modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.5);z-index:3000;overflow-y:auto">
  <div style="background:white;max-width:640px;margin:40px auto;border-radius:20px;padding:40px;position:relative">
    <button onclick="document.getElementById('setup-modal').style.display='none'" style="position:absolute;top:16px;right:16px;border:none;background:none;font-size:20px;cursor:pointer;color:#888">‚úï</button>
    <h3 style="font-family:'DM Serif Display',serif;font-size:24px;margin-bottom:20px;letter-spacing:-0.02em">Setting Up Google Drive Storage</h3>
    <div style="font-size:13px;line-height:1.8;color:#444">
      <p style="margin-bottom:12px">Follow these steps once. Responses will then automatically appear in a Google Sheet in your Drive.</p>
      <div style="counter-reset:steps">
        <div style="display:flex;gap:12px;margin-bottom:16px;align-items:flex-start">
          <div style="flex-shrink:0;width:24px;height:24px;border-radius:50%;background:#2a2fff;color:white;font-size:11px;font-weight:700;display:flex;align-items:center;justify-content:center">1</div>
          <div>Go to <strong>script.google.com</strong> and click <strong>New Project</strong></div>
        </div>
        <div style="display:flex;gap:12px;margin-bottom:16px;align-items:flex-start">
          <div style="flex-shrink:0;width:24px;height:24px;border-radius:50%;background:#2a2fff;color:white;font-size:11px;font-weight:700;display:flex;align-items:center;justify-content:center">2</div>
          <div>Delete the default code and paste the <strong>Apps Script code</strong> (provided in the separate <code>.gs</code> file)</div>
        </div>
        <div style="display:flex;gap:12px;margin-bottom:16px;align-items:flex-start">
          <div style="flex-shrink:0;width:24px;height:24px;border-radius:50%;background:#2a2fff;color:white;font-size:11px;font-weight:700;display:flex;align-items:center;justify-content:center">3</div>
          <div>Click <strong>Deploy ‚Üí New Deployment</strong> ‚Üí Type: <strong>Web App</strong> ‚Üí Execute as: <strong>Me</strong> ‚Üí Who has access: <strong>Anyone</strong> ‚Üí Click Deploy</div>
        </div>
        <div style="display:flex;gap:12px;margin-bottom:16px;align-items:flex-start">
          <div style="flex-shrink:0;width:24px;height:24px;border-radius:50%;background:#2a2fff;color:white;font-size:11px;font-weight:700;display:flex;align-items:center;justify-content:center">4</div>
          <div>Copy the <strong>Web App URL</strong> that appears</div>
        </div>
        <div style="display:flex;gap:12px;margin-bottom:16px;align-items:flex-start">
          <div style="flex-shrink:0;width:24px;height:24px;border-radius:50%;background:#2a2fff;color:white;font-size:11px;font-weight:700;display:flex;align-items:center;justify-content:center">5</div>
          <div>In this HTML file, find <code>YOUR_APPS_SCRIPT_URL</code> and replace it with your URL. Done!</div>
        </div>
      </div>
      <div style="background:#f0f4ff;border-radius:10px;padding:16px;margin-top:16px;font-size:12px;color:#2a2fff">
        üí° A Google Sheet called <strong>"Digital Well-being Survey Responses"</strong> will be automatically created in your Drive. Each submission adds a new row with timestamp + all answers.
      </div>
    </div>
  </div>
</div>

<script>
// ‚îÄ‚îÄ‚îÄ CONFIGURATION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// STEP: Replace this URL with your Google Apps Script Web App URL
const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyRrw40huoVJtRdtVnWMH_8Ywqs8N2G2LOKEoA8tLWAQlWj-_PgSTAgli7SnMTMGQpRHA/exec';
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

const SECTIONS = 6;
let currentSection = 0;
const answers = {};

// Hide setup banner if URL is configured
if (APPS_SCRIPT_URL !== 'YOUR_APPS_SCRIPT_URL') {
  document.getElementById('setup-banner').style.display = 'none';
}

function showSetupGuide() {
  document.getElementById('setup-modal').style.display = 'block';
}

function startSurvey() {
  document.getElementById('cover').style.display = 'none';
  document.getElementById('survey-main').style.display = 'block';
  document.getElementById('nav-btns').style.display = 'flex';
  currentSection = 1;
  showSection(1);
  buildNavDots();
  updateProgress();
}

function buildNavDots() {
  const wrap = document.getElementById('nav-dots');
  wrap.innerHTML = '';
  for (let i = 1; i <= SECTIONS; i++) {
    const d = document.createElement('div');
    d.className = 'nav-dot' + (i === 1 ? ' active' : '');
    d.onclick = () => { if (i < currentSection) goToSection(i); };
    wrap.appendChild(d);
  }
}

function showSection(n) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById(`sec-${n}`)?.classList.add('active');
  window.scrollTo({ top: 0, behavior: 'smooth' });
  document.getElementById('nav-counter').textContent = `Section ${n} of ${SECTIONS}`;
  document.getElementById('btn-back').style.visibility = n === 1 ? 'hidden' : 'visible';
  const isLast = n === SECTIONS;
  const btnNext = document.getElementById('btn-next');
  btnNext.textContent = isLast ? '‚úì  Submit Survey' : 'Continue ‚Üí';
  btnNext.className = isLast ? 'btn btn-submit' : 'btn btn-next';
  updateNavDots(n);
  updateProgress();
}

function updateNavDots(n) {
  document.querySelectorAll('.nav-dot').forEach((d, i) => {
    d.className = 'nav-dot';
    if (i + 1 < n) d.classList.add('done');
    else if (i + 1 === n) d.classList.add('active');
  });
}

function updateProgress() {
  const pct = currentSection === 0 ? 0 : ((currentSection - 1) / SECTIONS) * 100;
  document.getElementById('progress-fill').style.width = pct + '%';
}

function nextSection() {
  if (currentSection < SECTIONS) { currentSection++; showSection(currentSection); }
  else submitSurvey();
}

function prevSection() {
  if (currentSection > 1) { currentSection--; showSection(currentSection); }
}

function goToSection(n) { currentSection = n; showSection(n); }

function selectOpt(el, qId) {
  const container = el.parentElement;
  const isMulti = el.classList.contains('multi');
  const max = parseInt(container.dataset.max) || 999;
  if (!isMulti) {
    container.querySelectorAll('.opt').forEach(o => o.classList.remove('selected'));
    el.classList.add('selected');
    answers[qId] = el.querySelector('.opt-label').textContent;
  } else {
    const selected = container.querySelectorAll('.opt.selected');
    if (el.classList.contains('selected')) {
      el.classList.remove('selected');
    } else if (selected.length < max) {
      el.classList.add('selected');
    } else {
      el.style.borderColor = 'var(--red)';
      setTimeout(() => el.style.borderColor = '', 600);
      return;
    }
    answers[qId] = [...container.querySelectorAll('.opt.selected')].map(o => o.querySelector('.opt-label').textContent).join('; ');
  }
  markAnswered(el.closest('.q-card').id);
}

function selectScale(el, qId) {
  el.parentElement.querySelectorAll('.scale-btn').forEach(b => b.classList.remove('selected'));
  el.classList.add('selected');
  answers[qId] = el.textContent;
  markAnswered(el.closest('.q-card').id);
}

function markAnswered(cardId) {
  if (cardId) document.getElementById(cardId)?.classList.add('answered');
}

function toggleEmail(show) {
  document.getElementById('q29-card').style.display = show ? 'block' : 'none';
}

async function submitSurvey() {
  // Collect all open text answers
  ['q7','q8','q12','q13','q18','q20','q21','q22','q26','q27','q30','q29'].forEach(id => {
    const el = document.getElementById(id);
    if (el && el.value.trim()) answers[id] = el.value.trim();
  });

  const btnNext = document.getElementById('btn-next');
  btnNext.disabled = true;
  btnNext.textContent = 'Saving...';

  // Show overlay
  document.getElementById('submitting-overlay').classList.add('visible');

  const payload = {
    timestamp: new Date().toISOString(),
    // Section 1
    age: answers.q1 || '',
    platform: answers.q2 || '',
    daily_screen_time: answers.q3 || '',
    used_wellbeing_feature: answers.q4 || '',
    phone_relationship: answers.q5 || '',
    life_stage: answers.q6 || '',
    // Section 2
    pickup_estimate: answers.q7 || '',
    first_app: answers.q8 || '',
    late_night_activity: answers.q9 || '',
    self_awareness_scale: answers.q10 || '',
    screen_time_feeling: answers.q11 || '',
    snap_out_moment: answers.q12 || '',
    // Section 3
    unconscious_pickup_context: answers.q13 || '',
    top_emotions: answers.q14 || '',
    uncontrolled_times: answers.q15 || '',
    broke_phone_rule: answers.q16 || '',
    habit_vs_emotion_scale: answers.q17 || '',
    frustrating_pattern: answers.q18 || '',
    // Section 4
    features_used: answers.q19 || '',
    why_stopped_or_continued: answers.q20 || '',
    dashboard_problem: answers.q21 || '',
    dream_question: answers.q22 || '',
    // Section 5
    preferred_insight_format: answers.q23 || '',
    emotional_comfort_scale: answers.q24 || '',
    trust_factors: answers.q25 || '',
    felt_understood_app: answers.q26 || '',
    one_thing_to_understand: answers.q27 || '',
    // Section 6
    follow_up_interest: answers.q28 || '',
    email: answers.q29 || '',
    final_thoughts: answers.q30 || ''
  };

  try {
    if (APPS_SCRIPT_URL === 'YOUR_APPS_SCRIPT_URL') {
      // Demo mode ‚Äî simulate delay
      await new Promise(r => setTimeout(r, 1500));
      console.log('üìä Survey response (demo mode ‚Äî not saved):', payload);
    } else {
      await fetch(APPS_SCRIPT_URL, {
        method: 'POST',
        mode: 'no-cors',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });
    }
    showThankYou();
  } catch (err) {
    console.error('Submission error:', err);
    // Still show thank you ‚Äî don't leave user hanging
    showThankYou();
  }
}

function showThankYou() {
  document.getElementById('submitting-overlay').classList.remove('visible');
  document.getElementById('survey-main').style.display = 'none';
  document.getElementById('nav-btns').style.display = 'none';
  document.getElementById('progress-fill').style.width = '100%';
  const ty = document.getElementById('thankyou');
  ty.style.display = 'flex';
}
</script>
</body>
</html>
